name: Scheduled Job Scraper

on:
  schedule:
    # Runs every minute between 6:30 AM and 6:30 PM IST (1:00 to 13:00 UTC)
    - cron: '* 1-13 * * *'
  workflow_dispatch: # Allows you to trigger it manually from the GitHub UI

jobs:
  run-scraper:
    runs-on: ubuntu-latest
    timeout-minutes: 5 # Set a timeout for the whole job
    steps:
      - name: Trigger Vercel Function
        run: |
          echo "Triggering URL: ${{ secrets.VERCEL_APP_URL }}/post-single"
          curl --fail --silent --show-error --max-time 120 "${{ secrets.VERCEL_APP_URL }}/post-single"
        env:
          # Make sure the secret is set correctly in your repo settings
          VERCEL_APP_URL: ${{ secrets.VERCEL_APP_URL }}
